// Nodejs
const { writeFile } = require("node:fs/promises");
const { existsSync } = require("node:fs");

const downloadIMG = async (imgName) => {
  const req = await fetch(
    "https://jigsaw.minhabiblioteca.com.br/books/9786555763195/epub/OEBPS/images/" +
      imgName,
    {
      headers: {
        accept: "image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
        "accept-language": "pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7,en-GB;q=0.6",
        "cache-control": "no-cache",
        pragma: "no-cache",
        "sec-ch-ua":
          '"Microsoft Edge";v="119", "Chromium";v="119", "Not?A_Brand";v="24"',
        "sec-ch-ua-mobile": "?0",
        "sec-ch-ua-platform": '"Windows"',
        "sec-fetch-dest": "image",
        "sec-fetch-mode": "no-cors",
        "sec-fetch-site": "same-origin",
        cookie:
          "jig_isbns=IntcImlzYm5zXCI6W1wiU1VCLUtKUkRZTkFSNVFcIixcIlNVQi1URkZKT1RLUkVKXCIsXCJTVUItWk1XS1FZRUFIRVwiLFwiU1VCLUZZV0tDMEhNWkNcIixcIlNVQi1KVDNPSVM1VFZUXCIsXCJTVUItNjY0ODEzMDA2MVwiLFwiOTc4NjU1NTc2MzE5NVwiXSxcImd1aWRcIjpcIlo4NTJYNVJGNURZNUVCNlpNVlBTXCIsXCJlXCI6MSxcImlkXCI6XCJiMzhmNzhlZDcyM2U2ZWFjZTgyZDc1ZmQzNzg1YjQ2YlwiLFwicnRcIjpudWxsLFwicmlcIjpudWxsfSI%3D--20d0228ab4d5f63cf4480ebe98af86fdc569c2607c006e98b59c513e619ad546; cf_clearance=iramTv67bhlO5BIDmb6l9U7vdo272V1g82mFe_.CdqU-1701040255-0-1-6530a199.92b8d44a.5cd3fd90-0.2.1701040255; prokofiev=IlwiMmVkYzU3YTMxMTliMzQ3OThhNTc5NzYxMjliOTRjNzdcIiI%3D--50dcc3104554677bb3122c5cf57ed4c15b78f86ef016b8f460cf9b8a064ac1ed; _jigsaw_session=0K8LC%2FQP2FATCwccXHjd%2BBA%2FT7BOAHqRVwWlyDdCu3qR5w340OhOUZSs5Pt%2BAsDIYxbmGL%2BczARlv2S9h5P2r81sf4R2%2FYxy2TLKBQjgYiWCdpJ3aT3SwrnOEzK7x9UFhLtyA2Zs1CyEoEaygEYbREvuNsDc1qTAxSYeOYvAi6C%2FmJ3Xj0iSUDs9O%2Fd%2FIttoAArhWvrHcmPgZx2wjZM0SMAv1pfGd%2BZJiJbM5%2Bh%2FQgMV%2BTXyTuQzJGHdceOYrTUewepFbwKUngie6vjRUt0ZdK8RHbqRUMV9NuU%2F2bc9Rz%2FkwhELGvpcNg0l2fYZdZl3CW3zLhQv9LNLNjiR2QAUVxZnxTuzXD6U13vzG6OJo4KDqslmpUgxebdFJ%2FRvzNFwwI045bCi%2Fhk%3D--Qr%2BuCfOfx%2BwwB4WF--u%2BJMrfPMvUblRMT2kICxDQ%3D%3D",
        // Referer:
        //   "https://jigsaw.minhabiblioteca.com.br/books/9786555763195/epub/OEBPS/xhtml/chapter02.xhtml?favre=brett",
        "Referrer-Policy": "strict-origin-when-cross-origin",
      },
      body: null,
      method: "GET",
    }
  );
  const path = "../images/" + imgName;
  if (!existsSync(path)) {
    writeFile(path, req.body);
    console.log("❇️ DOWNLOADED: " + imgName);
  } else console.log("🟨 CACHE: " + imgName);
};

const urls = [
  "fig5-1.png",
  "fig5-2.png",
  "fig5-3.png",
  "fig5-4.png",
  "fig5-5.png",
  "fig5-6.png",
  "fig5-7.png",
  "fig5-8.png",
  "fig5-9.png",
  "fig5-10.png",
  "fig5-11.png",
  "fig5-12.png",
  "fig5-13.png",
  "fig5-14.png",
  "fig5-15.png",
  "fig5-16.png",
  "fig5-17.png",
  "fig5-18.png",
  "fig5-19.png",
  "fig5-20.png",
  "fig5-21.png",
  "fig5-22.png",
  "fig5-23.png",
  "fig5-24.png",
  "fig5-25.png",
  "fig5-26.png",
  "fig5-27.png",
  "fig5-28.png",
  "fig5-29.png",
  "fig5-30.png",
  "fig5-31.png",
  "fig5-32.png",
  "fig5-33.png",
  "bull.png",
  "fig2-1.png",
  "f0013-01.png",
  "fig2-2.png",
  "fig2-3.png",
  "Icone.png",
  "fig3-1.png",
  "fig3-2.png",
  "fig3-3.png",
  "fig4-1.png",
  "fig4-2.png",
  "fig4-3.png",
  "fig4-4.png",
  "fig4-5.png",
  "fig4-6.png",
  "fig4-7.png",
  "fig4-8.png",
  "fig4-9.png",
  "fig4-10.png",
  "fig6-1.png",
  "gra7-1.png",
  "fig7-1.png",
  "fig7-2.png",
  "fig7-3.png",
  "fig7-4.png",
  "fig7-5.png",
  "fig7-6.png",
  "fig7-7.png",
  "fig7-8.png",
  "fig7-9.png",
  "fig7-10.png",
  "fig7-11.png",
  "fig7-12.png",
  "fig7-13.png",
  "fig7-14.png",
  "fig7-15.png",
  "fig7-16.png",
  "fig9-1.png",
  "fig9-2.png",
  "fig10-1.png",
  "fig10-2.png",
  "fig10-3.png",
  "fig10-4.png",
  "fig10-5.png",
  "fig11-1.png",
  "fig11-2.png",
  "fig11-3.png",
  "fig11-4.png",
  "fig11-5.png",
  "fig11-6.png",
  "fig11-1.png",
  "fig11-2.png",
  "fig11-3.png",
  "fig11-4.png",
  "fig11-5.png",
  "fig11-6.png",
  "fig12-1.png",
  "fig12-2.png",
  "fig12-3.png",
  "fig12-4.png",
  "fig12-5.png",
  "fig12-6.png",
  "fig13-1.png",
  "fig13-2.png",
  "fig13-3.png",
  "fig13-4.png",
  "fig13-5.png",
  "fig14-1.png",
  "fig14-2.png",
  "fig15-1.png",
  "fig15-2.png",
  "fig15-3.png",
  "fig15-4.png",
  "fig15-5.png",
  "fig15-6.png",
  "fig15-7.png",
  "fig15-8.png",
  "fig15-9.png",
  "fig15-10.png",
  "fig16-1.png",
  "fig16-2.png",
  "fig16-3.png",
  "fig16-4.png",
  "fig16-5.png",
  "fig16-6.png",
  "fig16-7.png",
  "fig16-8.png",
  "fig17-1.png",
  "fig17-2.png",
  "fig17-3.png",
  "fig17-4.png",
  "fig17-5.png",
  "fig17-6.png",
  "fig18-1.png",
  "fig18-2.png",
  "fig18-3.png",
  "fig18-4.png",
  "fig18-5.png",
  "fig18-6.png",
  "fig19-1.png",
  "fig19-2.png",
  "fig19-3.png",
  "fig19-4.png",
  "fig19-5.png",
  "fig19-6.png",
  "fig20-1.png",
  "fig20-2.png",
  "fig20-2a.png",
  "fig21-1.png",
  "fig21-2.png",
  "fig21-3.png",
  "fig21-4.png",
  "fig21-5.png",
  "fig22-1.png",
  "fig22-2.png",
  "fig22-3.png",
  "fig22-4.png",
  "fig22-5.png",
  "fig22-6.png",
  "fig22-7.png",
  "fig22-8.png",
  "fig22-9.png",
  "fig22-10.png",
  "fig22-11.png",
  "fig23-1.png",
  "fig23-2.png",
  "fig23-3.png",
  "fig23-4.png",
  "fig23-5.png",
  "fig23-6.png",
  "fig23-7.png",
  "fig24-1.png",
  "fig24-2.png",
  "fig24-3.png",
  "fig24-4.png",
  "fig24-5.png",
  "fig25-1.png",
  "fig25-2.png",
  "fig25-3.png",
  "fig25-4.png",
  "fig25-5.png",
  "fig25-6.png",
  "fig25-7.png",
  "fig26-1.png",
  "fig26-2.png",
  "fig26-3.png",
  "fig26-4.png",
  "fig26-5.png",
  "fig26-6.png",
  "fig26-7.png",
  "fig27-1.png",
  "fig27-2.png",
  "fig28-1.png",
  "fig28-2.png",
  "fig28-3.png",
  "fig28-4.png",
  "fig28-5.png",
  "fig28-6.png",
  "fig28-7.png",
  "fig28-8.png",
  "fig28-9.png",
  "fig28-10.png",
  "fig29-1.png",
  "fig29-2.png",
  "fig29-3.png",
  "fig29-4.png",
  "fig29-5.png",
  "fig30-1.png",
  "fig30-2.png",
  "fig30-3.png",
  "fig30-4.png",
  "fig30-5.png",
  "fig30-6.png",
  "fig30-7.png",
  "fig30-8.png",
  "fig31-1.png",
  "fig31-2.png",
  "fig31-3.png",
  "fig31-4.png",
  "fig31-5.png",
  "fig31-6.png",
  "fig31-7.png",
  "fig31-8.png",
  "fig32-1.png",
  "fig32-2.png",
  "fig32-3.png",
  "fig32-4.png",
  "fig32-5.png",
  "fig32-6.png",
  "fig32-7.png",
  "fig32-8.png",
  "fig32-9.png",
  "fig32-10.png",
  "fig32-11.png",
  "fig32-12.png",
  "fig32-13.png",
  "fig32-14.png",
  "fig33-1.png",
  "fig33-2.png",
  "fig33-3.png",
  "fig33-4.png",
  "fig33-5.png",
  "fig34-1.png",
  "fig34-2.png",
  "fig34-3.png",
  "fig35-1.png",
  "fig35-2.png",
  "fig35-3.png",
  "fig35-4.png",
  "fig35-5.png",
  "fig35-6.png",
  "fig36-1.png",
  "fig36-2.png",
];

(async () => {
  urls.map(async (e) => await downloadIMG(e));
})();
